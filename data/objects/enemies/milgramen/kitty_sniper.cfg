{
id: "kitty_sniper",
prototype: ["stationary_vulnerable"],
solid_area: [16,10,36,33],
is_strict: true,
always_active: true,

properties: {
	"@derive": "@include data/object_prototypes/enemies/kitty.cfg:properties",
	aim_at: "def(PointLike target) -> commands [
		if(0 < frame and frame < 9, set(facing, -1)), //Don't flip for straight up/down, to add in a little continuity.
		if(9 < frame and frame < 18, set(facing, 1)),
		set(time_in_animation, int(lib.math.interpolate([0,8,0], frame/16.0))), //10, because we've got separate animations for straight up and down.
	] where frame = m.loop(m.round(m.angle(me, target)/(360/18.0)-5), 18)
	  where m = lib.math",
},

editor_info: {
	"@derive": "@include data/object_prototypes/enemies/kitty.cfg:editor_info",
},


on_process: "aim_at(level.player)",

on_create: "set(animation, 'snipe')",
animation: [
	{
		id: "attract", //Look sniper-y for the editor. The default pose, facing straight-down, is hard to recognise out of context.
		image: "enemies/kitty-sniper.png",
		accel_x: 0,
		accel_y: 80,
		pad: 3,
		rotate_on_slope: true,
		body_area: [23,14,23,25],
		no_remove_alpha_borders: true,
		rect: [285,1,"@eval 285+68",69],
		frames: 1,
		duration: 99999999,
	},{
		id: "snipe", //One frame for each of the drawn 180Â° rotations.
		image: "enemies/kitty-sniper.png",
		accel_x: 0,
		accel_y: 80,
		pad: 3,
		rotate_on_slope: true,
		body_area: [23,14,23,25],
		no_remove_alpha_borders: true,
		rect: [1,1,69,70],
		frames: 9,
		duration: 1, //3.3 weeks
	},
],

object_type: [{
	id: "muzzle_flash",
	on_end_anim: "die()",
	animation: {
		id: "die",
		image: "effects/explosion2.png",
		rect: [1,1,22,36],
		frames: 6,
		frames_per_row: 3,
		pad: 3,
		duration: 4,
	},
}],
	
}