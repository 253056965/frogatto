{
id: "skeeter",
prototype: ["hittable"],
hitpoints: 40,
traction_in_air: 1000,
friction: 1000,
properties: {
	swallowable: "bool :: true",
	attack_damage: "1",
	team: "'evil'",
	acquirable_item_drop_value: "10",					
	points_value: "14",
	target_close: "if(lib.math.length(x,y,vars.goal_x,vars.goal_y) < 50, 1, 0)",
	seek_target: "[add(velocity_x, cos(angle(x,y,vars.goal_x,vars.goal_y)) * velMag),
							add(velocity_y, sin(angle(x,y,vars.goal_x,vars.goal_y)) * velMag),
				] where velMag = 30",
	decelerate: "[set(velocity_x, velocity_x*0.8), set(velocity_y, velocity_y*0.8)]",
	delay_interval: "100*1d6",	

	//enable throwing
	basic_type: "me.type",
	thrown_type: "me.basic_type+'.thrown'", 
},
on_create: "[set(activation_border, max(abs(vars.zone_x2-vars.zone_x1), abs(vars.zone_y2-vars.zone_y1))),
					animation('hover'),
					schedule(delay_interval, fire_event('warn')),
					set(vars.randSeed, 1d400)]",
on_force_death: "[handle_death(null),die()]",
on_enter_water: "[handle_death(null),die()]",


on_warn: "[animation('warn'),schedule(20, fire_event('set_goal'))]",
on_process_warn: "if(cycle%2=0, set(brightness,4000),set(brightness,50))",
on_set_goal: "[set(vars.goal_x, vars.zone_x1 + 1d(zone_width)),
				set(vars.goal_y, vars.zone_y1 + 1d(zone_height)),
				animation('normal'),
				set(brightness,255),
				schedule(delay_interval, fire_event('warn'))] where zone_width = (vars.zone_x2-vars.zone_x1) where zone_height = (vars.zone_y2-vars.zone_y1)",
on_process_normal: "[if(target_close, if(max(velocity_x,velocity_y >20),decelerate,animation('hover')), seek_target),
						facing(sign(velocity_x))]",
on_process_hover: "[set(velocity_x,sin(cycle*(8+1d3)+vars.randSeed)*40),set(velocity_y,sin(cycle*(10+1d3)+vars.randSeed)*60)]",
on_end_anim: "switch(animation,
					'hurt',animation('hover'),
					animation(animation))",
zorder: "@include data/zorder.cfg:in_front_of_parallax_objects",
editor_info: {
	category: "enemies, forest",
	var: [
		{
			name: "zone_x1",
			type: "x",
			value: "x - 400",
		},
		{
			name: "zone_x2",
			type: "x",
			value: "x + 400",
		},
		{
			name: "zone_y1",
			type: "y",
			value: "y - 400",
		},
		{
			name: "zone_y2",
			type: "y",
			value: "y + 400",
		},
	],
},
animation: [
	{
		feet_x: 11,
		feet_y: 21,
		image: "enemies/skeeter.png",
		pad: 3,
		body_area: "all",
		frames: 5,
		duration: 1,
		attack_area: [15,17,17,19],
		accel_x: 0,
		accel_y: 0,
		id: "normal",
		rect: [1,1,20,24],
	},
	{
		feet_x: 11,
		feet_y: 21,
		image: "enemies/skeeter.png",
		pad: 3,
		body_area: "all",
		frames: 5,
		duration: 1,
		attack_area: [15,17,17,19],
		accel_x: 0,
		accel_y: 0,
		id: "hover",
		rect: [1,1,20,24],
	},
	{
		feet_x: 11,
		feet_y: 21,
		image: "enemies/skeeter.png",
		pad: 3,
		body_area: "all",
		frames: 5,
		duration: 1,
		attack_area: [15,17,17,19],
		accel_x: 0,
		accel_y: 0,
		id: "warn",
		rect: [1,1,20,24],
	},
	{
		feet_x: 11,
		feet_y: 21,
		image: "enemies/skeeter.png",
		pad: 3,
		body_area: "all",
		frames: 1,
		duration: 18,
		attack_area: [15,17,17,19],
		accel_x: 0,
		accel_y: 0,
		id: "hurt",
		rect: [93,28,112,51],
	},
],
object_type: {
	id: "thrown",
	prototype: ["throwable_small_enemy"],
	properties: {
		default_anim: "'hover'",
		acquirable_item_drop_value: 10,					
		points_value: 14,
	},

	#specifically trigger death here because non-solid objects don't have a water-level
	on_enter_water: "[handle_death(null),die()]",
	on_die: "if(me.underwater, null, proto_event('throwable_small_enemy', 'die'))",
	on_return_to_normal: "[proto_event('hittable', 'return_to_normal'), schedule(40,fire_event('warn'))]",
	on_spat: "[proto_event('hittable', 'spat'), set(brightness,255)]",
	animation: [
		{
			image: "enemies/skeeter.png",
			id: "thrown",
			thrown_area: "all",
			duration: 60,
			rect: [47,28,66,51],
			frames: 1,
			body_area: null,
		},
		{
			image: "enemies/skeeter.png",
			id: "on_back",
			rect: [47,28,66,51],
			frames: 2,
			duration: 5,
			body_area: "all",
		},
	],
},
}
