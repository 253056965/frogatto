{
	id: "floating_mushroom_platform",
	is_strict: true,
	activation_border: 500,
	zorder: "@include data/zorder.cfg:exterior_decor",
	editor_info: {
		category: "platforms",
		help: "A platform which can be stood on, but drifts downwards when force is applied to the top of it.",
	},

	properties: {
		being_stood_on: "bool :: ( (lib.math.length(level.player, self) < 200) and (level.player.standing_on = me) )",
		//being_stood_on: "bool :: (level.player.is_standing_on_platform and (level.player.standing_on = me))",
		material_sound: "'wood_solid'",

		do_process: "if(being_stood_on, float_down, float_up)",
		
		float_down: "commands :: if(mid_y < y2_bound, add(mid_y, movement_speed))
						where movement_speed = fraction * 10.0
						where fraction = dump(decimal(y2_bound - mid_y)/move_distance)
					",
		float_up: "commands :: if(mid_y > y1_bound, add(mid_y, movement_speed))
						where movement_speed = fraction * 10.0
						where fraction = dump(decimal(mid_y - y2_bound)/move_distance)
					",

		
		
		move_distance: "abs(y1_bound - y2_bound)",

		y1_bound: { type:"int", editor_info: { type: "y", value: "mid_y" }, init: "mid_y" },
		y2_bound: { type:"int", editor_info: { type: "y", value: "mid_y+(7*32)" }, init: "mid_y+(7+32)" },
	},
	on_process: "do_process",
	on_end_anim: "animation('normal')",
	
	platform_area: [4,24,43,25],
	animation: [
	{
		image: "props/mushroom-platform.png",
		id: "normal",
		rect: [0,0,47,47],
		pad: 3,
		frames: 1,
		duration: 4,
		reverse: true,
		no_remove_alpha_borders: true,
	}],
}
