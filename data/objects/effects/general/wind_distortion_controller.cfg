{
id: "wind_distortion_controller",
hidden_in_game: true,
is_strict: true,

properties: {
	_x_bound: { type: "int", editor_info: { type: "x", value: "x-100" } },
	_x2_bound: { type: "int", editor_info: { type: "x", value: "x+150" } },
	_y_bound: { type: "int", editor_info: { type: "y", value: "y-100" } },
	_y2_bound: { type: "int", editor_info: { type: "y", value: "y+150" } },

	//the zorder range the wind effect will take place on.
	begin_zorder: { type: "int", default: -1000000 },
	end_zorder: { type: "int", default: 1000 },

	//the current 'state' of the wind. Gets passed to the wind shader.
	wind_state: { type: "decimal", default: 0.0 },
},

editor_info: {
	category: "controllers",
},

on_create: "if(find(level.frame_buffer_shaders, value.shader_info = 'wind_distort') = null,
	add(level.frame_buffer_shaders, [{
		begin_zorder: begin_zorder,
		end_zorder: end_zorder,
		shader_info: 'wind_distort',
	}])
)
",

on_process: "[ set((object<- (object<- shader.shader).uniform_commands).u_wind_state, wind_state) | shader <- level.frame_buffer_shaders, shader.shader_info = 'wind_distort', shader.begin_zorder = begin_zorder, shader.end_zorder = end_zorder]",
}
