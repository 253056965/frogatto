//The mana bar displays how much energy for abilities we have.
{
	id: "mana_display",
	is_strict: false,
	use_absolute_screen_coordinates: true,
	hidden_in_game: true,
	
	zorder: "@include data/zorder.cfg:in_front_of_everything",

	properties: {
		target: { type: "obj player_controlled" },
		
		mana_bar: {
			type: "widget", 
			init: "widget(me, {
				type: 'progress',
				padding: [4,4],
				rect: [0,0,246,20],
				frame_set: 'default_button',
				progress: 50,
				colour: [109,220,68],
				resolution: 'double',
			})",
		},
	},
	
	on_create: "[
		set(me.widgets.child, dump(mana_bar)),
		set(mana_bar.max, target.max_mana),
	]",
	
	on_process: "[
		set(mana_bar.progress, target.mana),
	]",
}

/* PREVIOUSLY, IN hud.cfg:
	//// The blue mana-bar.		                 
	draw_animation('manabar_empty', 48, 32),
	if(level.local_player and level.local_player.mana > 0, ([
		draw_animation('charge_bar_left', x_offset, y_offset),
		draw_animation('charge_bar_right', x_offset + barLength*2, y_offset),
		if(barLength > 5, draw_animation_area('charge_bar_center', x_offset+10, y_offset, barLength-5))
	] where x_offset = 52, 
	        y_offset = 32,
	        barLength = int((fullBarLength*level.local_player.mana)/level.local_player.max_mana))
	  where fullBarLength = 114 ),
*/