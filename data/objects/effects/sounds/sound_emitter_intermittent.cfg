{
id: "sound_emitter_intermittent",
hidden_in_game: false,
is_strict: true,
always_active: true,
ignore_collide: true,
zorder: "@include data/zorder.cfg:in_front_of_everything",
editor_info: {
	category: "controllers",
},


properties: {

	//e.g. 'Cave-Drip.wav' <- 'ambient-intermittent/Cave-Drip5.wav'
	_filename: { type: "string", default: "", editor_info: { type: "enum", enum_values: "@eval unique(map(map(get_files_in_dir('sounds/ambient-intermittent'), value), regex_replace(value, q((\\d)*), '')))" } },

	available_audio_files: "map(get_files_in_dir('sounds/ambient-intermittent'), 'ambient-intermittent/'+value)",
	stripped_core_names: "map(available_audio_files, regex_replace(value, q((\\d)*\\.(wav|ogg)), ''))",
	effect_name_count: "size(filter(stripped_core_names, value = effect_name_path + effect_name_root))",
	effect_name_root: "regex_replace(_filename, '\\.(wav|ogg)', '')",
	effect_name_path: "'ambient-intermittent/'",
	effect_name_extension: "'.' + regex_replace(_filename, '\\D+([.]){1}', '')",
	final_sound_name: "effect_name_path + effect_name_root + if(effect_name_count > 0, 1d(effect_name_count), '') + effect_name_extension",
	
	delay_random: "100",
	delay_forced: "100",
},


on_create: "[if(effect_name_root and effect_name_count,fire_event('play_sound'))]",
on_play_sound: "[schedule(1d(delay_random)+delay_forced,fire_event('play_sound')),sound(final_sound_name, 1.0)]",

animation: {
	id: "normal",
	image: "effects/particles.png",
	x: 179,
	y: 166,
	w: 28,
	h: 28,
	duration: -1,
},
}