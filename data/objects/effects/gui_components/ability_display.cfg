//Show the currently selected ability, such as 'tongue' or 'firebreath'.
{
	id: "ability_display",
	is_strict: true,
	use_absolute_screen_coordinates: true,
	serializable: false,
	
	zorder: "@include data/zorder.cfg:in_front_of_everything",

	properties: {
		target: "obj frogatto_playable <- level.player",
		super_mode_active: "true",
		
		graphic: "object('${me.type}.graphic',0,0,1)",
		
		last_displayed_ability: { type: "string", default: 'invalid' },
	},
	
	//on_create: "[add_object(graphic)]",
	
	/*
	From frogatto process:
	//Dim the ability display if we're out of mana. Flash if we've got a super ready to deploy to attract attention to it.
	//(This causes a seemingly-unavoidable one-frame flicker of brightness when switching between ability graphics.)
	if(gui_ability_display.widgets.graphic, //Not be set on the first cycle if we're loading the game.
		set((widget<-gui_ability_display.widgets.graphic).alpha, 
			if(not swallowed_object or swallowed_object and swallowed_object.type = 'padlock' or ability_list[current_ability] = 'tongue',
				if(ability_is_charged_up(ability_list[current_ability]), 255, 255/3),
				if(ability_is_charged_up(super_ability_list_full[current_ability]), (cycle%3+1)*255/2, 255/3)
			)
		)
	),
	*/
	

	on_process: "if(last_displayed_ability != target.current_ability_name, [
		set(last_displayed_ability, target.current_ability_name),
		//set_widgets([ability_container, ability_display[target.current_ability_name] ]),
		// alpha is set by frogatto, depending on his mana level.
	])",
	
	object_type: [{
		id: "graphic",
		is_strict: true,
		use_absolute_screen_coordinates: true,
		serializable: false,
		zorder: "@include data/zorder.cfg:in_front_of_everything+1",
		
		animation: [{
			"@base": true,
			image: "gui/hud4.png",
		},
		{
			id: "tongue",
			rect: [  0, 0, 39,39],
		}, {
			id: "firebreath",
			rect: [ 42, 0, 81,39],
		}, {
			id: "energyshot",
			rect: [ 84, 0,123,39],
		}, {
			id: "homingshot",
			rect: [126, 0,165,39],
		}, {
			id: "acidbreath",
			rect: [168, 0,207,39],
		}],
	}],
	
	animation: {
		id: "bg", //black bg, goes behind overlay
		image: "gui/hud3.png",
		rect: [80,0,127,47],
	},
}