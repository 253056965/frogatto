{
	//Set no_motion_distort to no_bounce_distort to true to disable the effects.
	
	on_create: "set(mixins_motion_distort, {
		old_x: null,
		old_y: null,
		older_x: null,
		older_y: null,
	})",
	
	
	on_process: "[
		set(mmd.old_x, x),
		set(mmd.old_y, y),
		set(mmd.older_x, mmd.old_x),
		set(mmd.older_y, mmd.old_y),
		if(typeof(mmd.old_x) = 'int' and typeof(mmd.old_y) = 'int', ([
			set(custom_draw, [
				0,1,2,3, 
				[stretchA-diagonal*skew, stretchB-diagonal*skew], //This could possibly be refactored a bit more.
				[stretchB-diagonal*skew, stretchB+diagonal*skew],
				[stretchB+diagonal*skew, stretchA+diagonal*skew],
				[stretchA+diagonal*skew, stretchA-diagonal*skew],
			]),
		] where stretchA = (-mag_x)+( mag_y), //The orthagonal stretch factors for x and y.
		        stretchB = ( mag_x)+(-mag_y),
		        skew = min(mag_x, mag_y)      //The diagonal stretch factor.
		  where diagonal = if(sign(mmd.old_x - x) = sign(mmd.old_y - y), 1, -1),
		        mag_x = max(abs(mmd.old_x - x)-5, 0)*2, //magnitude x and y
		        mag_y = max(abs(mmd.old_y - y)-5, 0)*2, //Times 2 for strength of effect.
		)),
	] where mmd = mixins_motion_distort",
	
	on_end_process: "[]",
}